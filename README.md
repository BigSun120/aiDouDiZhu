# AI 斗地主

一个基于 Vue + TypeScript 的纯前端斗地主小游戏，直接在浏览器中调用大模型完成叫分与出牌决策，无需后端。

## 主要特性
- 标准斗地主流程：发牌、三轮叫/抢地主、出牌比拼、胜负统计。
- 多模型配置：支持全局或按地主/农民/玩家独立配置模型；厂商下拉（OpenAI、OpenAI 自定义、Gemini、Gemini 自定义）。
- 玩家也可由 AI 代打，并有独立的 API 配置。
- 形象设定与破限提示词：可为三家及玩家设置人设；可选注入额外“破限”提示词增强个性。
- 桌面交互：上帝视角切换、思考日志悬浮窗、可展开的气泡发言、手牌选牌与出牌动画。
- 日志与调试：AI 思考/决策日志、兜底策略提示、胜利弹窗与战绩累积。


## 快速开始
1. 安装依赖  
   ```bash
   npm install
   ```
2. 开发启动  
   ```bash
   npm run dev
   ```
   浏览器打开提示地址（一般为 http://localhost:5173）。
3. 生产构建  
   ```bash
   npm run build
   ```
4. 第一步：安装新增的依赖包 在您的项目终端中运行以下命令，来安装我们刚才新加的 gh-pages 包：

npm install
第二步：执行部署命令 请确保您已经将代码提交到了 GitHub 仓库。然后，在终端中运行：

npm run deploy
这个命令会自动完成两件事：首先，它会编译您的项目并生成一个 dist 文件夹；然后，它会将 dist 文件夹里的所有内容推送到一个名为 gh-pages 的新分支上。

## 使用说明
- **开始游戏**：进入页面后点击“开始游戏”发牌。
- **设置**：右上角“设置”按钮，配置 Base URL / API Key / 模型 / 厂商，支持为地主/农民/玩家单独配置，并可开启“破限”提示词或玩家 AI 代打。
- **形象设定**：在“形象设定”中为三家及玩家填写人设关键词，AI 会据此对话与决策时体现个性并与其他人设互动。
- **上帝视角**：切换查看所有手牌（仅调试/观战，AI 逻辑仍只基于可见信息）。
- **气泡与日志**：点击气泡展开详情，点击“思考日志”悬浮按钮展开/收起日志窗。
- **玩家发言**：每回合一次发言机会，内容会传给 AI，AI 发言会记录并回传给模型。

## 模型调用说明
- OpenAI 兼容：`POST {baseUrl}/v1/chat/completions`，模型 ID 例如 `gpt-4o-mini`。
- Gemini 兼容：`POST {baseUrl}/v1beta/models/{model}:generateContent`，模型 ID 例如 `gemini-2.0-flash-exp`。
- 玩家 AI：在设置中单独填写，开启“玩家由 AI 代打”后生效。

## 提示词策略
- 出牌与叫分提示词均位于 `prompts/` 目录，含合法牌型、比牌规则、身份目标、队友/对手识别、记录桌面发言与历史出牌、强制 talk等。


